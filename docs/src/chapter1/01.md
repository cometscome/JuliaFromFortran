# FortranとJuliaの文法比較
## 演算子

FortranとJuliaの演算子その他について比較してみましょう。ほとんど同じですが、一部だけ異なります。

|  定義  |  Fortran  | Julia  |
| ---- | ---- |---- |
|  $a+b$  |  ```a+b```  | ```a+b```  |
|  $a-b$  |  ```a-b```  | ```a-b```  |
|  $a \times b$  |  ```a*b```  | ```a*b```  |
|  $a \div b$  |  ```a/b```  | ```a/b```(実数)、```div(a,b)```(商（整数）)、```a÷b```(```div```と同じ。入力は```\div```で。)|
| $a \div b$の余り|  ```mod(a,b)```  | ```a % b```  |
|  $a^b$  |  ```a**b```  | ```a^b```  |
|  $\sin a $, $\cos b$  |  ```sin(a)```,```cos(b)```  | ```sin(a)```,```cos(b)```  |
|  $\|a\|$  |  ```abs(a)```  | ```abs(a)```  |
|  $\sqrt{a}$  |  ```sqrt(a)```  | ```sqrt(a)```  |
|  $e^a$  |  ```exp(a)```  | ```exp(a)```  |
|  $\log a$  |  ```log(a)```  | ```log(a)```  |
|  $6 \times 10^{-4}$ (倍精度) |  ```6d-4```  | ```6e-4```  |
|  $z$の複素共役 |  ```conjg(z)```  | ```conj(z)```  |
|  ${\rm Re}z$ |  ```dble(z)```  | ```real(z)```  |
|  ${\rm Im}z$ |  ```dimag(z)```  | ```imag(z)```  |
|  ${\rm Max}(a,b)$ |  ```max(a,b)```  | ```max(a,b)```  |





## 繰り返しループ


Fortranでは

```fortran
do i=1,5
end do
```

というdoループが用いられますが、対応するJuliaのループはforを使って、

```julia
for i=1:5
end
```
と書きます。

ループの途中で抜けたい場合、Fortranではexitを、Juliaではbreakを使います。

ループの次の反復ステップに行きたい場合には、Fortranではcycleを、Juliaではcontinueを使います。


## If文
条件分岐にはどちらもIf文を使います。Fortranでは
```fortran
if (a > b) then
else if(a < b) then
else
endif
```
のような形で書きますが、Juliaでは
```julia
if a > b
elseif a < b
else
end
```
と書きます。条件比較に使う比較演算子の違いをテーブルにまとめると

|  FORTRAN77 |  Fortran  | Julia  |
| ----  | ---- |---- |
| ```a .lt. b```|  ```a < b```  | ```a < b```  |
| ```a .le. b```|  ```a <= b```  | ```a <= b```  |
| ```a .eq. b```|  ```a == b```  | ```a == b```  |
| ```a .ne. b```|  ```a /= b```  | ```a != b```  |
| ```a .gt. b```|  ```a > b```  | ```a > b```  |
| ```a .ge. b```|  ```a >= b```  | ```a >= b```  |

となります。複数の条件を使う場合の違いは

|  定義 |  Fortran  | Julia  |
| ----  | ---- |---- |
| aかつb |  ```a .and. b```  | ```a && b```  |
| aまたはb |  ```a .or. b```  | ```a \|\| b```  |

です。

## 型の対応
Fortranでは変数の型を定義しなければコンパイルエラーが起きますが、Juliaの場合は型を意識せずにコーディングすることができます。一方、内部ではJuliaはやはり型を扱っていますから、Fortran使用者はFortranとJuliaの型の対応を知っておくと理解しやすいでしょう。

|  種類 |  Fortran  | Julia  |
| ----  | ---- |---- |
| 倍精度実数 |  ```real*8```や```real(8)```  | ```Float64``` |
| 単精度実数 |  ```real```や```real(4)```  |  ```Float32``` |
| 32ビット符号付き整数 |  ```integer```(機種依存及びコンパイルオプション依存)や```integer(4)```  |  ```Int32``` |
| 64ビット符号付き整数 |  ```integer```(機種依存及びコンパイルオプション依存)や```integer(8)```  |  ```Int64``` |
| 倍精度複素数 |  ```complex*16```や```complex(8)```  | ```ComplexF64``` |
| 単精度複素数 |  ```complex```や```complex(4)```  |  ```ComplexF32``` |
| 論理値 |  ```logical```  |  ```Bool``` |
| 文字データ |  ```character```  |  ```String``` |

## 配列の型と定義


## 出力
Fortranで画面に書き出したい場合には
```fortran
write(*,*) "a = ",a
```
のように書きます。Juliaでは
```julia
println("a = ",a)
```
あるいは
```julia
println("a = $a")
```
と書きます。```$a```と書くと変数を文字列に変えることができます。また、

```fortran
write(*,*) "a = ",2*a
```
であれば、
```julia
println("a = $(2*a)")
```
と書けます。

ファイルに出力する場合、Fortranでは
```fortran
open(10,file="test.txt")
write(10,*) "a = ",2*a
close(10)
```
のように装置番号を指定してファイルを開きますが、Juliaでは
```julia
fp = open("test.txt","w")
println(fp,"a = $(2*a)")
close(fp)
```
と書きます。

## 入力
テキストファイル```test.txt```が
```
           1   3.0000000000000000     
           2   6.0000000000000000     
           3   9.0000000000000000     
           4   12.000000000000000   
```
というデータだとしましょう。このファイルからデータを読み込む場合、Fortranでは、
```fortran
    open(12,file="test.txt")
    do i=1,4
        read(12,*) j,x
        write(*,*) j,x
    end do
    close(12)
```
とすることで読み込むことができます。Juliaの場合には、
```julia
data = readlines("test.txt")
for i=1:4
    u = split(data[i])
    j = parse(Int64,u[1])
    x = parse(Float64,u[2])
    println("$j $x")
end
```
で読み込めます。Juliaではこの```readline```を使うやり方の他にも読み込みの方法がありますが、ここでは使い勝手の良いこの方法のみを紹介することとします。



## 配列へのアクセス

Fortranでは配列aのi,j成分にアクセスするには
```fortran
a(i,j)
```
と書きますが、Juliaでは
```julia
a[i,j]
```
と書きます。
配列のメモリへの格納順はFortranとJuliaでは同じになっており、行列で言うところの列の単位で格納されています（一番左の添字が一番内側）。

配列の一部分へのアクセスもよく似ており、Fortranでは
```fortran
a(1:4,1:5)
```
となり、Juliaでは
```julia
a[1:4,1:5]
```
となります。

